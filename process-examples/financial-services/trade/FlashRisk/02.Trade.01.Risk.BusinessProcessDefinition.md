## 5. Trade: Speculative Risk Calculation

**Purpose:** Perform ad hoc risk calculations on captured but unconfirmed trades to enable stress-testing before confirmation or allocation.

**Scope:** On-demand risk analysis using both on-premises and cloud-based compute resources with multi-environment orchestration.

**Key Actors:**
- **Risk Department** — requests risk calculations and reviews results
- **Middle Office** — provides market data snapshots
- **Front Office** — receives risk analysis for decision-making
- **Compute Infrastructure** — on-premises and cloud-based calculation engines

**Process Flow:**
1. **Trigger Event** — Trade Captured → Risk Check requested (Front Office initiates)
2. **Task: Specify Risk Metrics (Risk Department)** — Define comprehensive risk requirements:
   - Sensitivity calculations (Greeks, duration, convexity)
   - Value-at-Risk (VaR) calculations
   - Stress test scenarios and parameters
   - Custom risk measures and portfolio impact
   - Regulatory capital calculations
3. **Task: Provide Market Data Snapshot (Middle Office)** — Supply current market data:
   - Real-time pricing data
   - Volatility surfaces and correlation matrices
   - Credit spreads and funding curves
   - Liquidity metrics and market conditions
4. **Parallel Compute Tasks:**
   - **On-Premises Compute (lightgrey)** → Run On-Prem Risk Jobs:
     - Utilize existing computational resources
     - Handle standard risk calculations
     - Process regulatory and compliance metrics
   - **Cloud Compute** → Dynamic cloud processing:
     - **Provision Cloud Engine** → Scale resources on demand
     - **Run Cloud Risk Jobs** → Execute complex calculations
     - **Tear Down Cloud Engine** → Release resources post-completion
5. **Task: Aggregate Risk Results** — Combine and reconcile outputs:
   - Merge results from all compute environments
   - Validate calculation consistency
   - Format results for review and decision-making
   - Generate risk reports and summaries
6. **Task: Review Results (Risk Department)** — Comprehensive risk analysis:
   - Assess calculated risk metrics against limits
   - Evaluate stress test outcomes
   - Consider portfolio impact and concentration risk
   - Provide recommendation to Front Office:
     - **Acceptable Risk** → Proceed with trade
     - **Unacceptable Risk** → Escalate for amendment or cancellation
7. **End Event** — Risk Results Available

**Success Criteria:**
- Risk calculations completed within required timeframe
- All requested metrics accurately computed
- Results properly aggregated from multiple compute sources
- Clear risk recommendations provided to Front Office
- Computational resources efficiently utilized

**Technical Requirements:**
- High-performance computing infrastructure
- Real-time market data feeds
- Scalable cloud computing capabilities
- Risk calculation model validation and governance
